#!/usr/bin/env ruby
require 'rubygems' unless defined?(Gem)
$LOAD_PATH.unshift(File.expand_path("../lib", File.dirname(__FILE__)))
require 'wukong'

Settings.use :commandline
Settings.define :mode, :type => Symbol, :default => :mapper
Settings.resolve!

script = Settings.rest.pop

Wukong.module_eval do
  extend Wukong::Mixin::FromFile

  from_file(script)

  flow(Settings.mode).run
end
